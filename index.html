<!DOCTYPE html>
<html lang="en">
<head>
    <title>I Halil Altun</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="ihalilaltun, ibrahim halil altun">
    <meta name="author" content="">
    
    
    
    <meta name="description" content="">
    <link href='https://fonts.googleapis.com/css?family=Inconsolata:400,700' rel='stylesheet' type='text/css'>
     <link href='/style.css' rel='stylesheet' type='text/css'>
    <link rel='shortcut icon' type='image/x-icon' href='https://ihalilaltun.me/favicon.ico' />
    
    <link rel="manifest" href="/manifest.json">
    <!--<script src='FrizbitServiceWorker.js'></script> -->
    <!--<script src='//cdn.segmentify.com/93a9a7c4-dc2e-49f7-832e-7c7fc3dabbf9/sw.js'></script>-->
    <!--<script src='//cdn.frizbit.com/frizbitjs/28cbd76d-df79-4244-a4a8-b245e1df8f9a.js'></script>-->
    <!--<script type="text/javascript"> var frizbit = frizbit || []; frizbit.push(["init", { autoRegister: true, notifyBox: { enabled: false } }]); </script>-->
    <!--<script src="https://cdn.segmentify.com/93a9a7c4-dc2e-49f7-832e-7c7fc3dabbf9/segmentify.js" charset="UTF-8"></script>-->
    <script src="segmentify-integration.js" charset="UTF-8"></script>
    <link type="text/css" rel="stylesheet" media="screen" href="segmentify.css">
    
    
    
    
  <!--  
<script src="https://www.gstatic.com/firebasejs/5.5.2/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyAWVLo1aOFsLE7UWAtbAmA3D_U7ai3NZ5U",
    authDomain: "push-notification-9c1d5.firebaseapp.com",
    databaseURL: "https://push-notification-9c1d5.firebaseio.com",
    projectId: "push-notification-9c1d5",
    storageBucket: "push-notification-9c1d5.appspot.com",
    messagingSenderId: "179681670744"
  };
  firebase.initializeApp(config);
    const messaging = firebase.messaging();
</script>
    
    <script>
        
        messaging.requestPermission().then(function() {
  console.log('Notification permission granted.');
  // TODO(developer): Retrieve an Instance ID token for use with FCM.
}).catch(function(err) {
  console.log('Unable to get permission to notify.', err);
});
        
        messaging.getToken().then(function(currentToken) {
  if (currentToken) {
      console.log(currentToken)
    sendTokenToServer(currentToken);
    updateUIForPushEnabled(currentToken);
  } else {
    // Show permission request.
    console.log('No Instance ID token available. Request permission to generate one.');
    // Show permission UI.
    updateUIForPushPermissionRequired();
    setTokenSentToServer(false);
  }
}).catch(function(err) {
  console.log('An error occurred while retrieving token. ', err);
  showToken('Error retrieving Instance ID token. ', err);
  setTokenSentToServer(false);
});
        
        
    </script>
-->
    
</head>
<body>
    
    <div class='fill-screen'>
    <img class='make-it-fit' 
         src='https://ihalilaltun.me/at.jpg'>
</div>
    
    <button id="subscribe" class="subscribe" type="button">Click Me!</button>
    
    <!--
            <script src='/sw.js'></script>
   <script>
       navigator.serviceWorker.register('/sw.js')
    .then(reg => console.log('SW registered!', reg))
    .catch(err => console.log('Boo!', err));
    </script>
-->
   <!--

<script>
        
        var agent = '';
  document.body.onload = function () {
    setTimeout(function () {
      if ('serviceWorker' in navigator) {
        if (/Chrome/i.test(navigator.userAgent)) agent = 'Chrome';
        else if (/Firefox/i.test(navigator.userAgent)) agent = 'Firefox';
        navigator.serviceWorker.register('/sw.js').then(function (reg) {
          console.log('reg is ok');
        }).catch(function (error) {
          console.log('Unable to register service worker!', error);
        });
      }

    }, 2000);

  };
        
        </script>
   -->
    
    <script>
        var pushId = "web.com.segmentify.push.apple";  
  
var subscribe = document.querySelector("#subscribe");  
subscribe.addEventListener("click", function(evt) {  
    pushNotification();   
}, false);  
  
var pushNotification = function () {  
    "use strict";  
      
    if ('safari' in window && 'pushNotification' in window.safari) {  
        var permissionData = window.safari.pushNotification.permission(pushId);  
        checkRemotePermission(permissionData);  
    } else {  
        alert("Push notifications not supported.");  
    }  
};  
  
var checkRemotePermission = function (permissionData) {  
    "use strict";  
      
    if (permissionData.permission === 'default') {  
        console.log("The user is making a decision");  
        window.safari.pushNotification.requestPermission(  
            'https://safari-test.segmentify.com',  
            pushId,  
            {},  
            checkRemotePermission  
        );  
    }  
    else if (permissionData.permission === 'denied') {  
        console.dir(arguments);  
    }  
    else if (permissionData.permission === 'granted') {  
        console.log("The user said yes, with token: "+ permissionData.deviceToken);  
    }  
};  


    </script>
</body>
